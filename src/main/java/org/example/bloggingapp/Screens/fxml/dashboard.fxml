<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="org.example.bloggingapp.Dashboard.WorkingDashboardController"
      spacing="10" style="-fx-padding: 10;">
    
    <!-- Navigation Bar -->
    <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #f0f0f0; -fx-padding: 10;">
        <Label text="ðŸ“Š Blogging App Dashboard" style="-fx-font-size: 18px; -fx-font-weight: bold;" />
        <Region HBox.hgrow="ALWAYS" />
        <Button fx:id="mainFeedButton" text="ðŸ“± Main Feed" onAction="#goToMainFeed" 
                style="-fx-background-color: #1d9bf0; -fx-text-fill: white;" />
        <Button fx:id="loginButton" text="ðŸ” Login" onAction="#goToLogin" 
                style="-fx-background-color: #1d9bf0; -fx-text-fill: white;" />
        <Button fx:id="signupButton" text="ðŸ“ Sign Up" onAction="#goToSignup" 
                style="-fx-background-color: #1d9bf0; -fx-text-fill: white;" />
    </HBox>
    
    <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
    
    <!-- Posts Management Tab -->
    <Tab text="Posts Management">
        <VBox spacing="10" style="-fx-padding: 10;">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Search:" />
                <TextField fx:id="searchPostField" prefWidth="200" promptText="Search posts..." />
                <Button fx:id="refreshPostsButton" text="Refresh" onAction="#handleRefreshPosts" />
            </HBox>
            
            <TableView fx:id="postsTable" prefHeight="300">
                <columns>
                    <TableColumn fx:id="postIdColumn" text="ID" prefWidth="50" />
                    <TableColumn fx:id="titleColumn" text="Title" prefWidth="200" />
                    <TableColumn fx:id="contentColumn" text="Content" prefWidth="300" />
                    <TableColumn fx:id="userIdColumn" text="User ID" prefWidth="80" />
                    <TableColumn fx:id="createdAtColumn" text="Created At" prefWidth="150" />
                </columns>
            </TableView>
            
            <GridPane hgap="10" vgap="10">
                <Label text="Title:" GridPane.rowIndex="0" GridPane.columnIndex="0" />
                <TextField fx:id="titleField" GridPane.rowIndex="0" GridPane.columnIndex="1" prefWidth="400" />
                
                <Label text="Content:" GridPane.rowIndex="1" GridPane.columnIndex="0" />
                <TextArea fx:id="contentArea" GridPane.rowIndex="1" GridPane.columnIndex="1" prefWidth="400" prefHeight="100" />
                
                <Label text="User ID:" GridPane.rowIndex="2" GridPane.columnIndex="0" />
                <TextField fx:id="userIdField" GridPane.rowIndex="2" GridPane.columnIndex="1" prefWidth="100" />
                
                <HBox spacing="10" GridPane.rowIndex="3" GridPane.columnIndex="1">
                    <Button fx:id="createPostButton" text="Create Post" onAction="#handleCreatePost" />
                    <Button fx:id="updatePostButton" text="Update Post" onAction="#handleUpdatePost" />
                    <Button fx:id="deletePostButton" text="Delete Post" onAction="#handleDeletePost" />
                </HBox>
            </GridPane>
        </VBox>
    </Tab>
    
    <!-- Performance Metrics Tab -->
    <Tab text="Performance Metrics">
        <VBox spacing="15" style="-fx-padding: 15;">
            <HBox spacing="20" alignment="CENTER">
                <VBox spacing="5" alignment="CENTER">
                    <Label text="Total Posts" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                    <Label fx:id="totalPostsLabel" text="0" style="-fx-font-size: 24px; -fx-text-fill: #2196F3;" />
                </VBox>
                <VBox spacing="5" alignment="CENTER">
                    <Label text="Total Users" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                    <Label fx:id="totalUsersLabel" text="0" style="-fx-font-size: 24px; -fx-text-fill: #4CAF50;" />
                </VBox>
                <VBox spacing="5" alignment="CENTER">
                    <Label text="Cache Hit Rate" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                    <Label fx:id="cacheHitRateLabel" text="0%" style="-fx-font-size: 24px; -fx-text-fill: #FF9800;" />
                </VBox>
                <VBox spacing="5" alignment="CENTER">
                    <Label text="Cache Size" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                    <Label fx:id="cacheSizeLabel" text="0" style="-fx-font-size: 24px; -fx-text-fill: #9C27B0;" />
                </VBox>
                <VBox spacing="5" alignment="CENTER">
                    <Label text="Evictions" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                    <Label fx:id="evictionCountLabel" text="0" style="-fx-font-size: 24px; -fx-text-fill: #F44336;" />
                </VBox>
            </HBox>
            
            <HBox spacing="15" alignment="CENTER">
                <VBox spacing="5">
                    <VBox fx:id="hitRateChartContainer" prefWidth="400" prefHeight="250" />
                </VBox>
                <VBox spacing="5">
                    <VBox fx:id="responseTimeChartContainer" prefWidth="400" prefHeight="250" />
                </VBox>
            </HBox>
            
            <VBox spacing="5">
                <Label text="Detailed Metrics:" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                <TextArea fx:id="metricsTextArea" prefHeight="150" wrapText="true" 
                         style="-fx-font-family: monospace; -fx-font-size: 12px;" />
            </VBox>
        </VBox>
    </Tab>
    
    <!-- Cache Management Tab -->
    <Tab text="Cache Management">
        <VBox spacing="15" style="-fx-padding: 15;">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button fx:id="clearPostCacheButton" text="Clear Post Cache" onAction="#handleClearPostCache" 
                        style="-fx-background-color: #FF9800; -fx-text-fill: white;" />
                <Button fx:id="clearUserCacheButton" text="Clear User Cache" onAction="#handleClearUserCache"
                        style="-fx-background-color: #FF9800; -fx-text-fill: white;" />
                <Button fx:id="clearAllCacheButton" text="Clear All Cache" onAction="#handleClearAllCache"
                        style="-fx-background-color: #F44336; -fx-text-fill: white;" />
                <Button fx:id="cleanupExpiredButton" text="Cleanup Expired" onAction="#handleCleanupExpired"
                        style="-fx-background-color: #2196F3; -fx-text-fill: white;" />
                <Button fx:id="forceRefreshButton" text="Force Refresh" onAction="#handleForceRefresh"
                        style="-fx-background-color: #4CAF50; -fx-text-fill: white;" />
            </HBox>
            
            <GridPane hgap="15" vgap="10">
                <Label text="Cache Configuration:" style="-fx-font-size: 16px; -fx-font-weight: bold;" 
                       GridPane.rowIndex="0" GridPane.columnIndex="0" GridPane.columnSpan="2" />
                
                <Label text="Cache Size:" GridPane.rowIndex="1" GridPane.columnIndex="0" />
                <HBox spacing="10" alignment="CENTER_LEFT" GridPane.rowIndex="1" GridPane.columnIndex="1">
                    <Slider fx:id="cacheSizeSlider" min="100" max="2000" value="500" prefWidth="200" />
                    <Label fx:id="cacheSizeValueLabel" text="500" />
                </HBox>
                
                <Label text="Expiration Time:" GridPane.rowIndex="2" GridPane.columnIndex="0" />
                <ComboBox fx:id="expirationTimeCombo" GridPane.rowIndex="2" GridPane.columnIndex="1" prefWidth="150" />
                
                <Button fx:id="applyConfigButton" text="Apply Configuration" onAction="#handleApplyConfig"
                        style="-fx-background-color: #4CAF50; -fx-text-fill: white;"
                        GridPane.rowIndex="3" GridPane.columnIndex="1" />
            </GridPane>
            
            <VBox spacing="5">
                <Label text="Cache Status:" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                <TextArea fx:id="cacheStatusArea" prefHeight="200" wrapText="true"
                         style="-fx-font-family: monospace; -fx-font-size: 12px;" />
            </VBox>
        </VBox>
    </Tab>
    
    <!-- Optimization Tab -->
    <Tab text="Optimization">
        <VBox spacing="15" style="-fx-padding: 15;">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button fx:id="analyzePerformanceButton" text="Analyze Performance" onAction="#handleAnalyzePerformance"
                        style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-pref-width: 150;" />
                <Button fx:id="optimizeCacheButton" text="Optimize Cache" onAction="#handleOptimizeCache"
                        style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-pref-width: 150;" />
                <Button fx:id="preloadDataButton" text="Preload Data" onAction="#handlePreloadData"
                        style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-pref-width: 150;" />
                <Button fx:id="warmupCacheButton" text="Warmup Cache" onAction="#handleWarmupCache"
                        style="-fx-background-color: #9C27B0; -fx-text-fill: white; -fx-pref-width: 150;" />
            </HBox>
            
            <VBox spacing="5">
                <Label text="Optimization Status:" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                <ProgressBar fx:id="optimizationProgress" prefWidth="600" progress="0" />
                <Label fx:id="optimizationStatusLabel" text="Ready" />
            </VBox>
            
            <VBox spacing="5">
                <Label text="Optimization Log:" style="-fx-font-size: 14px; -fx-font-weight: bold;" />
                <TextArea fx:id="optimizationLogArea" prefHeight="250" wrapText="true"
                         style="-fx-font-family: monospace; -fx-font-size: 12px;" />
            </VBox>
        </VBox>
    </Tab>
    
</TabPane>
</VBox>
